<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>재귀함수</title>
</head>
<h2>
  <h1>재귀함수</h1>
  <h2>주어진 숫자까지의 모든 숫자 더하기</h2>
  <p>숫자를 입력: <input type="text" id="inputNum"></p>
  <div>
    <p>1. for</p>
    <p>결과: <span id="forRes"></span></p>
  </div>
  <div>
    <p>2. 재귀함수</p>
    <p>결과: <span id="recRes"></span></p>
  </div>
  <div>
    <p>3. 등차수열</p>
    <p>결과: <span id="aritRes"></span></p>
  </div>

  <script>
    "use strict";
    
/*숫자 1 + 2 + ... + n을 계산하는 함수
sumTo(1) = 1
sumTo(2) = 2 + 1 = 3
sumTo(3) = 3 + 2 + 1 = 6
sumTo(4) = 4 + 3 + 2 + 1 = 10
...
sumTo(100) = 100 + 99 + ... + 2 + 1 = 5050
*/

var input = document.getElementById('inputNum');
var limit = 1000000;

input.addEventListener('keyup', function(e){
  var inputNum = parseInt(input.value);

  if(e.code == 'Enter' && inputNum <= limit) {
    document.getElementById('forRes').innerText = useFor(inputNum);
    document.getElementById('recRes').innerText = useFor(inputNum);
    document.getElementById('aritRes').innerText = useArithmetical(inputNum);
  } else if((e.code == 'Enter' && inputNum > limit)) {
    document.getElementById('forRes').innerText = "STOP!!!";
    document.getElementById('recRes').innerText = "STOP!!!";
    document.getElementById('aritRes').innerText = "STOP!!!";
  }
});

/* 1. for 반복문 사용하기 */
function useFor(n) {
  var result = 0;
  for(var i = n; i > 0; i--) {
    result += i;
  }
  return result;
}

/* 2. 재귀 사용하기 */
function useRecursion() {
  if(n == 1) {
    return 1;
  }
  return n + useRecursion(n - 1);
}

/* 3. 등차수열 공식 사용하기 */
function useArithmetical (n) {
  return n * (n+1) / 2;
}

</script>

<hr>

<h2>팩토리얼 계산하기</h2>
<p>?팩토리얼: 1부터 자연수 n 까지의 모든 자연수의 곱. n 팩토리얼은 n! 로 표시한다.</p>
<div>
  <p>숫자를 입력: <input type="text" id="factorialInputNum"></p>
  <p>결과: <span id="factorial"></span></p>
</div>

<script>
var factorialInput = document.getElementById('factorialInputNum');
var factorialLimit = 20;

factorialInput.addEventListener('keyup', function(e){
  var inputNum = parseInt(factorialInput.value);

  if(e.code == 'Enter' && inputNum <= factorialLimit) {
    document.getElementById('factorial').innerText = factorial(inputNum);
  } else if((e.code == 'Enter' && inputNum > factorialLimit)) {
    document.getElementById('factorial').innerText = "STOP!!!";
  }
});

function factorial(n) {
  if( n == 1) {return 1;}
  return n * factorial(n-1);
}
</script>

<hr>
<h2>피보나치 수 계산하기</h2>
<p>피보나치 수열: 피보나치 수는 첫째와 둘째 항이 1이며 그 뒤의 모든 항은 바로 앞 두 항의 합인 수열</p>
<!-- 1, 1, 2, 3, 5, 8, 13 ... -->
<div>
  <p>숫자를 입력: <input type="text" id="fibInputNum"></p>
  <p>결과: <span id="fib"></span></p>
</div>

<script>
  /* 재귀를 사용하면 연산 시간이 오래 걸린다. 반복문을 사용한다. */

var fibInput = document.getElementById('fibInputNum');
var fibLimit = 50;

fibInput.addEventListener('keyup', function(e){
  var inputNum = parseInt(fibInput.value);

  if(e.code == 'Enter' && inputNum <= fibLimit) {
    document.getElementById('fib').innerText = fib(inputNum);
  } else if((e.code == 'Enter' && inputNum > fibLimit)) {
    document.getElementById('fib').innerText = "STOP!!!";
  }
});

function fib(n) {
  var a = 1;
  var b = 1;
  for (var i = 3; i <= n; i++) { // 1, 1, 2, 3... 이므로 3부터 시작함.
    var c = a + b;
    a = b;
    b = c;
  }
  return b;
}

</script>

</body>
</html>